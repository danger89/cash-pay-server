<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tutorial: Webhooks | CashPayServer</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="">
        
            <a href="https://infra.cash" rel="noopener noreferrer" target="_blank">
                <img src="https://raw.githubusercontent.com/developers-cash/cash-pay-server/master/logo.svg" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">CashPayServer</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
        <ol class="lnb-tab">
            <li id="api-tab">
                <a href="#"><h4>API</h4></a>
            </li>
            <li id="examples-tab">
                <a href="#"><h4>Guide</h4></a>
            </li>
        </ol>
    
    <div class="lnb-examples hidden"><h3>Guide</h3><ul><li><a href="tutorial-REST-API.html">REST-API</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="REST-API_sub"></div></li><li><a href="tutorial-Webhooks.html">Webhooks</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Webhooks_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Authenticate.html">Authenticate</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Authenticate_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Authenticate.html#.isAPIKeyAllowed">isAPIKeyAllowed</a></li></ul></div></li><li><a href="Engine.html">Engine</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Engine_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Engine.html#broadcastTx">broadcastTx</a></li><li><a href="Engine.html#start">start</a></li></ul></div></li><li><a href="Libs.Utils.html">Utils</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Libs.Utils_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Libs.Utils.html#.matchesInvoice">matchesInvoice</a></li></ul></div></li><li><a href="Protocols.BIP70.html">BIP70</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Protocols.BIP70_sub"></div></li><li><a href="Protocols.JSONPaymentProtocol.html">JSONPaymentProtocol</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Protocols.JSONPaymentProtocol_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Protocols.JSONPaymentProtocol.html#.payment">payment</a></li><li><a href="Protocols.JSONPaymentProtocol.html#.paymentRequest">paymentRequest</a></li><li><a href="Protocols.JSONPaymentProtocol.html#.paymentVerification">paymentVerification</a></li></ul></div></li><li><a href="Rates.html">Rates</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Rates_sub"></div></li><li><a href="Routes.AdminRoute.html">AdminRoute</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Routes.AdminRoute_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Routes.AdminRoute.html#postSearch">postSearch</a></li></ul></div></li><li><a href="Routes.InvoiceRoute.html">InvoiceRoute</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Routes.InvoiceRoute_sub"></div></li><li><a href="Routes.RootRoute.html">RootRoute</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Routes.RootRoute_sub"></div></li><li><a href="Routes.SigningKeysRoute.html">SigningKeysRoute</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Routes.SigningKeysRoute_sub"></div></li><li><a href="Services.Webhooks.html">Webhooks</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Services.Webhooks_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Services.Webhooks.html#.error">error</a></li><li><a href="Services.Webhooks.html#broadcasted">broadcasted</a></li><li><a href="Services.Webhooks.html#broadcasting">broadcasting</a></li><li><a href="Services.Webhooks.html#confirmed">confirmed</a></li><li><a href="Services.Webhooks.html#requested">requested</a></li></ul></div></li><li><a href="Services.WebSocket.html">WebSocket</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Services.WebSocket_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Services.WebSocket.html#notify">notify</a></li><li><a href="Services.WebSocket.html#startServer">startServer</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Namespaces</h3><ul><li><a href="Libs.html">Libs</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Libs_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Libs.html#.ExtendedError">ExtendedError</a></li></ul></div></li><li><a href="Protocols.html">Protocols</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Protocols_sub"></div></li><li><a href="Routes.html">Routes</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Routes_sub"></div></li><li><a href="Services.html">Services</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Services_sub"></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    

<section>
    <header>
        

        <h2>Webhooks</h2>
    </header>

    
        <article class="readme">
            <h1>Webhooks</h1>
<p>Webhooks will not be resent by CashPayServer in the event of failure.</p>
<p>This is by design as Webhooks also allow some customization of the Invoice data.</p>
<p>Specifically, if a Webhook returns a JSON payload, it is able to modify the following fields on an invoice.</p>
<pre class="prettyprint source"><code>{
  data: &quot;https://redirect.here/once-paid&quot;,
  privateData: &quot;someSensitiveInformation&quot;
}
</code></pre>
<p>For debugging of failed Webhooks, it is recommended to use the <a href="https://admin.v1.pay.infra.cash">Admin Interface</a>.</p>
<p>The following are examples of Webhook Payloads.</p>
<h3>Broadcasting</h3>
<pre class="prettyprint source lang-json"><code>{
  &quot;invoice&quot;: {
    &quot;currency&quot;: &quot;BCH&quot;,
    &quot;webhook&quot;: {
      &quot;broadcasting&quot;: &quot;https://webhook.site/4134f5c2-2b50-4bf0-ad89-4b50f3522eea&quot;,
      &quot;broadcasted&quot;: &quot;https://webhook.site/4134f5c2-2b50-4bf0-ad89-4b50f3522eea&quot;,
      &quot;confirmed&quot;: &quot;https://webhook.site/4134f5c2-2b50-4bf0-ad89-4b50f3522eea&quot;
    },
    &quot;totals&quot;: {
      &quot;nativeTotal&quot;: 85614,
      &quot;baseCurrency&quot;: &quot;USD&quot;,
      &quot;baseCurrencyTotal&quot;: 0.25,
      &quot;userCurrencyTotal&quot;: 0.25
    },
    &quot;network&quot;: &quot;main&quot;,
    &quot;userCurrency&quot;: &quot;USD&quot;,
    &quot;txIds&quot;: [],
    &quot;outputs&quot;: [
      {
        &quot;address&quot;: &quot;bitcoincash:qqjrl4jy7r02d7umx6fexrgydx8ra8xtrsmxkck6l2&quot;,
        &quot;amount&quot;: &quot;0.25USD&quot;,
        &quot;amountNative&quot;: 85614,
      }
    ],
    &quot;apiKey&quot;: &quot;test_api_key&quot;,
    &quot;expires&quot;: 1607045748.94,
    &quot;time&quot;: 1607045718.94,
    &quot;createdAt&quot;: &quot;2020-12-04T01:35:18.941Z&quot;,
    &quot;updatedAt&quot;: &quot;2020-12-04T01:35:24.594Z&quot;,
    &quot;service&quot;: {
      &quot;paymentURI&quot;: &quot;https://v1.pay.infra.cash/bch/pay/5fc99256ea6c0b0322f756da&quot;,
      &quot;walletURI&quot;: &quot;bitcoincash:?r=https://v1.pay.infra.cash/bch/pay/5fc99256ea6c0b0322f756da&quot;,
      &quot;webSocketURI&quot;: &quot;wss://v1.pay.infra.cash&quot;
    },
    &quot;id&quot;: &quot;5fc99256ea6c0b0322f756da&quot;
  },
  &quot;event&quot;: &quot;broadcasting&quot;
}
</code></pre>
<h3>Broadcasted</h3>
<pre class="prettyprint source lang-json"><code>{
  &quot;invoice&quot;: {
    &quot;currency&quot;: &quot;BCH&quot;,
    &quot;webhook&quot;: {
      &quot;broadcasting&quot;: &quot;https://webhook.site/4134f5c2-2b50-4bf0-ad89-4b50f3522eea&quot;,
      &quot;broadcasted&quot;: &quot;https://webhook.site/4134f5c2-2b50-4bf0-ad89-4b50f3522eea&quot;,
      &quot;confirmed&quot;: &quot;https://webhook.site/4134f5c2-2b50-4bf0-ad89-4b50f3522eea&quot;
    },
    &quot;totals&quot;: {
      &quot;nativeTotal&quot;: 85614,
      &quot;baseCurrency&quot;: &quot;USD&quot;,
      &quot;baseCurrencyTotal&quot;: 0.25,
      &quot;userCurrencyTotal&quot;: 0.25
    },
    &quot;network&quot;: &quot;main&quot;,
    &quot;userCurrency&quot;: &quot;USD&quot;,
    &quot;txIds&quot;: [
      &quot;94b080cc4ef10c1042ca4915be1d5693fd8ca4220fbaa70019947c0a06bb4570&quot;
    ],
    &quot;outputs&quot;: [
      {
        &quot;address&quot;: &quot;bitcoincash:qqjrl4jy7r02d7umx6fexrgydx8ra8xtrsmxkck6l2&quot;,
        &quot;amount&quot;: &quot;0.25USD&quot;,
        &quot;amountNative&quot;: 85614,
      }
    ],
    &quot;apiKey&quot;: &quot;test_api_key&quot;,
    &quot;expires&quot;: 1607045748.94,
    &quot;time&quot;: 1607045718.94,
    &quot;createdAt&quot;: &quot;2020-12-04T01:35:18.941Z&quot;,
    &quot;updatedAt&quot;: &quot;2020-12-04T01:35:38.615Z&quot;,
    &quot;broadcasted&quot;: &quot;2020-12-04T01:35:38.614Z&quot;,
    &quot;service&quot;: {
      &quot;paymentURI&quot;: &quot;https://v1.pay.infra.cash/bch/pay/5fc99256ea6c0b0322f756da&quot;,
      &quot;walletURI&quot;: &quot;bitcoincash:?r=https://v1.pay.infra.cash/bch/pay/5fc99256ea6c0b0322f756da&quot;,
      &quot;webSocketURI&quot;: &quot;wss://v1.pay.infra.cash&quot;
    },
    &quot;id&quot;: &quot;5fc99256ea6c0b0322f756da&quot;
  },
  &quot;event&quot;: &quot;broadcasted&quot;
}
</code></pre>
<h3>Confirmed</h3>
<pre class="prettyprint source lang-json"><code>{
  &quot;invoice&quot;: {
    &quot;currency&quot;: &quot;BCH&quot;,
    &quot;webhook&quot;: {
      &quot;broadcasting&quot;: &quot;https://webhook.site/4134f5c2-2b50-4bf0-ad89-4b50f3522eea&quot;,
      &quot;broadcasted&quot;: &quot;https://webhook.site/4134f5c2-2b50-4bf0-ad89-4b50f3522eea&quot;,
      &quot;confirmed&quot;: &quot;https://webhook.site/4134f5c2-2b50-4bf0-ad89-4b50f3522eea&quot;
    },
    &quot;totals&quot;: {
      &quot;nativeTotal&quot;: 85614,
      &quot;baseCurrency&quot;: &quot;USD&quot;,
      &quot;baseCurrencyTotal&quot;: 0.25,
      &quot;userCurrencyTotal&quot;: 0.25
    },
    &quot;network&quot;: &quot;main&quot;,
    &quot;userCurrency&quot;: &quot;USD&quot;,
    &quot;txIds&quot;: [
      &quot;94b080cc4ef10c1042ca4915be1d5693fd8ca4220fbaa70019947c0a06bb4570&quot;
    ],
    &quot;outputs&quot;: [
      {
        &quot;address&quot;: &quot;bitcoincash:qqjrl4jy7r02d7umx6fexrgydx8ra8xtrsmxkck6l2&quot;,
        &quot;amount&quot;: &quot;0.25USD&quot;,
        &quot;amountNative&quot;: 85614,
      }
    ],
    &quot;apiKey&quot;: &quot;test_api_key&quot;,
    &quot;expires&quot;: 1607045748.94,
    &quot;time&quot;: 1607045718.94,
    &quot;createdAt&quot;: &quot;2020-12-04T01:35:18.941Z&quot;,
    &quot;updatedAt&quot;: &quot;2020-12-04T01:35:39.220Z&quot;,
    &quot;broadcasted&quot;: &quot;2020-12-04T01:35:38.614Z&quot;,
    &quot;confirmed&quot;: 664364,
    &quot;service&quot;: {
      &quot;paymentURI&quot;: &quot;https://v1.pay.infra.cash/bch/pay/5fc99256ea6c0b0322f756da&quot;,
      &quot;walletURI&quot;: &quot;bitcoincash:?r=https://v1.pay.infra.cash/bch/pay/5fc99256ea6c0b0322f756da&quot;,
      &quot;webSocketURI&quot;: &quot;wss://v1.pay.infra.cash&quot;
    },
    &quot;id&quot;: &quot;5fc99256ea6c0b0322f756da&quot;
  },
  &quot;event&quot;: &quot;confirmed&quot;
}
</code></pre>
        </article>
    
</section>



</div>

<footer>
    <img class="logo" src="https://raw.githubusercontent.com/developers-cash/cash-pay-server/master/logo.svg" style="">
    <div class="footer-text">CashPayServer V1</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        showLnbExamples();
    </script>

</body>
</html>